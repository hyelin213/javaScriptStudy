<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iconEditor</title>
    <style>
        table{ border-collapse: collapse; }
        table, td { border: 1px solid #ccc; }
        td{ padding: 15px; }
    </style>
</head>
<body>
    <h1>iconEditor</h1>
    <div>
        가로: <input type="number" id="id_width">,
        세로: <input type="number" id="id_height">
        <input type="button" id="id_create" value="테이블 생성">
    </div>
    <div id="container"></div>

    <script>

        const idWidth = document.querySelector('#id_width');
        const idHeight = document.querySelector('#id_height');
        const idCreate = document.querySelector('#id_create');

        idCreate.addEventListener('click', () => {
            //id_width 엘리먼트에 저장된 값을 가져와서 숫자형으로 파싱하여 nx에 저장한다.
            const nx = parseInt(idWidth.value);

            //id_height 엘리먼트에 저장된 값을 가져와서 숫자형으로 파싱하여 ny에 저장한다.
            const ny = parseInt(idHeight.value);

            idWidth.value = '';
            idHeight.value = '';

            const containerElem = document.querySelector('#container');
            createIconEditor(containerElem, nx, ny);
            
        });

        function createIconEditor(parent, nx, ny){
            parent.innerHTML = '';
            const inputColorElem = document.createElement('input');
            inputColorElem.type = 'color';
            parent.append(inputColorElem);

            const tableElem = document.createElement('table');
            
            parent.append(tableElem);
            for(let i=0; i<ny; i++){
                const tr = document.createElement('tr');
                tableElem.append(tr);
                for(let z=0; z<nx; z++){
                    const td = document.createElement('td');
                    tr.append(td);

                    // =================================색 채우기 Tzone

                    // 방법 1 - td에 이벤트를 하나씩 다 걸어주기
                    /*
                    td.addEventListener('click', e => {
                        td.style.backgroundColor = inputColorElem.value;
                    });
                    */
                }
            }
            
            tableElem.addEventListener('click', ({target}) => {
                
                /*
                if(target.style.backgroundColor){
                    target.style.backgroundColor = '';
                    return;
                }
                target.style.backgroundColor = inputColorElem.value;
                */

                // =====================Tzone
                
                target.style.backgroundColor = target.style.backgroundColor ? '' : inputColorElem.value;

            }, true);

            


        }

    </script>
</body>
</html>